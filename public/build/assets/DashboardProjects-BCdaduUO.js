import{W as j,j as e,r as u,Y as b}from"./app-Ce08GlTn.js";import{A as f}from"./AuthenticatedLayout--znFZfrR.js";import{T as p,I as i}from"./TextInput-DcJR13at.js";import{P as y}from"./PrimaryButton-DLhbGUgf.js";import{I as n}from"./InputLabel-DLAS8cgh.js";import{A as v}from"./index-CPvQRaJg.js";import"./ApplicationLogo-D6zqvLOi.js";import"./transition-B_MXxabd.js";const N=()=>{const{data:s,setData:r,post:c,processing:d,errors:l,reset:m}=j({name:"",description:"",image:null,category:"",url:"",github_url:""}),o=a=>{a.preventDefault();const t=new FormData;t.append("name",s.name),t.append("description",s.description),t.append("category",s.category),t.append("url",s.url),t.append("github_url",s.github_url),s.image&&t.append("image",s.image),c("/dashboard/projects",{data:t,onSuccess:()=>m(),headers:{"Content-Type":"multipart/form-data"}})},g=a=>{const t=a.target.files?a.target.files[0]:null;r("image",t)};return e.jsxs("form",{onSubmit:o,className:"max-w-lg mx-auto",children:[e.jsxs("div",{className:"container m-3",children:[e.jsx(n,{htmlFor:"name",value:"Name"}),e.jsx(p,{id:"name",type:"text",className:"mt-1 block w-full",value:s.name,onChange:a=>r("name",a.target.value),required:!0,autoFocus:!0,autoComplete:"name"}),e.jsx(i,{className:"mt-2",message:l.name})]}),e.jsxs("div",{className:"container m-3",children:[e.jsx(n,{htmlFor:"description",value:"Description"}),e.jsx("textarea",{id:"description",className:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",rows:5,value:s.description,onChange:a=>r("description",a.target.value),required:!0,autoComplete:"description"}),e.jsx(i,{className:"mt-2",message:l.description})]}),e.jsxs("div",{className:"container m-3",children:[e.jsx(n,{htmlFor:"category",value:"Category"}),e.jsxs("select",{id:"category",value:s.category,onChange:a=>r("category",a.target.value),required:!0,className:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",children:[e.jsx("option",{value:"",disabled:!0,children:"Select category"}),e.jsx("option",{value:"Vue",children:"Vue"}),e.jsx("option",{value:"React",children:"React"}),e.jsx("option",{value:"Angular",children:"Angular"}),e.jsx("option",{value:"Java",children:"Java"})]}),e.jsx(i,{className:"mt-2",message:l.category})]}),e.jsxs("div",{className:"container m-3",children:[e.jsx(n,{htmlFor:"url",value:"URL"}),e.jsx(p,{id:"url",type:"text",className:"mt-1 block w-full",value:s.url,onChange:a=>r("url",a.target.value),required:!0,autoComplete:"url"}),e.jsx(i,{className:"mt-2",message:l.url})]}),e.jsxs("div",{className:"container m-3",children:[e.jsx(n,{htmlFor:"github_url",value:"GitHub URL"}),e.jsx(p,{id:"github_url",type:"text",className:"mt-1 block w-full",value:s.github_url,onChange:a=>r("github_url",a.target.value),placeholder:"Enter GitHub URL (optional)"}),e.jsx(i,{className:"mt-2",message:l.github_url})]}),e.jsxs("div",{className:"container m-3",children:[e.jsx(n,{htmlFor:"image",value:"Image"}),e.jsxs("div",{className:"mt-1 flex items-center",children:[e.jsxs("label",{htmlFor:"image",className:"cursor-pointer bg-white rounded-md border border-gray-300 py-2 px-4 flex items-center justify-center w-full",children:[e.jsx("span",{className:"text-primary",children:"Select a file"}),e.jsx("input",{type:"file",id:"image",name:"image",onChange:g,required:!0,className:"hidden"})]}),e.jsx("span",{className:"ml-2",children:s.image&&s.image.name})]}),e.jsx(i,{className:"mt-2",message:l.image})]}),e.jsx("div",{className:"container m-3",children:e.jsx(y,{type:"submit",className:`w-full justify-center ${d?"opacity-25":""}`,disabled:d,children:"Add new plugin!"})})]})},w=N,C={Vue:"bg-green-600",React:"bg-blue-600",Java:"bg-orange-600",Angular:"bg-red-600"};function R({auth:s}){const[r,c]=u.useState([]),[d,l]=u.useState(!0),[m,o]=u.useState(null);u.useEffect(()=>{fetch("/api/projects").then(a=>a.json()).then(a=>{c(a),l(!1)}).catch(a=>{o("Failed to load projects."),l(!1)})},[]);const g=a=>{var t;confirm("Are you sure you want to delete this project?")&&fetch(route("dashboard.destroy",a),{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-Token":((t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content"))||""}}).then(h=>{if(h.ok)c(r.filter(x=>x.id!==a));else return h.json().then(x=>{o(x.message||"Failed to delete project.")})}).catch(h=>{o("Failed to delete project.")})};return d?e.jsx("p",{children:"Loading..."}):m?e.jsx("p",{children:m}):e.jsxs(f,{user:s.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Dashboard Projects"}),children:[e.jsx(b,{title:"Dashboard Projects"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("article",{className:"container p-10 w-full",children:[e.jsx("h2",{className:"ms-4 font-bold text-lg",children:"Add new plugin!"}),e.jsx(w,{}),e.jsxs("div",{className:"py-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"All Projects"}),r.map(a=>{const t=C[a.category]||"bg-gray-700";return e.jsx("div",{className:"mb-6 p-6 bg-white shadow-md rounded-lg",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-1/2 pr-4",children:e.jsx("img",{src:a.image,alt:a.name,className:"w-full h-48 object-cover rounded-lg"})}),e.jsxs("div",{className:"w-1/2 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:a.name}),e.jsx("p",{className:"text-gray-600 mt-2",children:a.description}),e.jsx("p",{className:"text-gray-500 mt-2",children:e.jsx("span",{className:`px-3 py-1 rounded ${t} text-white`,children:a.category})})]}),e.jsxs("div",{className:"flex mt-4 space-x-4",children:[e.jsx("a",{href:a.url,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",target:"_blank",rel:"noopener noreferrer",children:"View Site"}),a.github_url&&e.jsxs("a",{href:a.github_url,className:"px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700",target:"_blank",rel:"noopener noreferrer",children:[e.jsx(v,{className:"inline mr-2"}),"View on GitHub"]}),e.jsx("button",{onClick:()=>g(a.id),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Delete"})]})]})]})},a.id)})]})]})})})})]})}export{R as default};
